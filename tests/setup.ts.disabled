import '@testing-library/jest-dom';
import { cleanup } from '@testing-library/react';
import { afterEach, beforeAll } from 'vitest';
import { initializeDatabase } from '@/lib/db/client';

// Initialize test database before all tests
beforeAll(async () => {
  initializeDatabase();
});

// Cleanup after each test
afterEach(() => {
  cleanup();
});

// Mock environment variables
process.env.DATABASE_URL = ':memory:';
process.env.NODE_ENV = 'test';
